#include <exec/types.h>
#include <stdlib.h>

// handy tool: https://deepbluembedded.com/sine-lookup-table-generator-calculator/

static signed char sinTable[] = {0, 4, 9, 13, 18, 22, 26, 31, 35, 39, 43, 48, 52, 56, 60, 64, 67, 71, 75, 78, 82, 85, 88, 91, 94, 97, 100, 103, 105, 108, 110, 112,
114, 116, 118, 119, 121, 122, 123, 124, 125, 126, 126, 127, 127, 127, 127, 127, 126, 126, 125, 124, 123, 122, 121, 119, 118, 116, 114, 112, 110, 108, 105, 103,
100, 97, 94, 91, 88, 85, 82, 78, 75, 71, 67, 64, 60, 56, 52, 48, 43, 39, 35, 31, 26, 22, 18, 13, 9, 4, 0, -4, -9, -13, -18, -22,
-26, -31, -35, -39, -43, -48, -52, -56, -60, -64, -67, -71, -75, -78, -82, -85, -88, -91, -94, -97, -100, -103, -105, -108, -110, -112, -114, -116, -118, -119, -121, -122,
-123, -124, -125, -126, -126, -127, -127, -127, -127, -127, -126, -126, -125, -124, -123, -122, -121, -119, -118, -116, -114, -112, -110, -108, -105, -103, -100, -97, -94, -91, -88, -85,
-82, -78, -75, -71, -67, -64, -60, -56, -52, -48, -43, -39, -35, -31, -26, -22, -18, -13, -9, -4};

static unsigned char sinTable2[] = {
128, 136, 143, 151, 159, 167, 174, 182,
189, 196, 202, 209, 215, 220, 226, 231,
235, 239, 243, 246, 249, 251, 253, 254,
255, 255, 255, 254, 253, 251, 249, 246,
243, 239, 235, 231, 226, 220, 215, 209,
202, 196, 189, 182, 174, 167, 159, 151,
143, 136, 128, 119, 112, 104, 96, 88,
81, 73, 66, 59, 53, 46, 40, 35,
29, 24, 20, 16, 12, 9, 6, 4,
2, 1, 0, 0, 0, 1, 2, 4,
6, 9, 12, 16, 20, 24, 29, 35,
40, 46, 53, 59, 66, 73, 81, 88,
96, 104, 112, 119};

signed char math_sin(USHORT angle){
    if (angle > 179) angle = angle%180;
    return sinTable[angle];
}

unsigned char math_sin2(USHORT index){
    if (index > 99) index = index%100;
    return sinTable2[index];
}

int random(int max) {
    return rand() / (RAND_MAX/max);
}

UBYTE clampNibble(BYTE b) {
  return b > 15 ? 15 : b < 0 ? 0 : b;
}

UBYTE clampNibbleUp(BYTE b) {
  return b > 15 ? 15 : b;
}

UBYTE clampNibbleDown(BYTE b) {
  return b < 0 ? 0 : b;
}